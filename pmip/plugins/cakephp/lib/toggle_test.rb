class ToggleBetweenClassAndTest < PMIPAction  def run(event, context)    from = context.editor_filepath    to = toggle_to(from)    return if to.nil?    elements = Elements.new.find_file(to)    if elements.size == 1      Navigator.new.open(elements.first)    else      if Dialogs.new.yes_no('Test not found', 'Would you like to create a test for this class?' + from.to_s + ' ' + to.to_s)        #to.write_lines([])        Refresh.file_system { Navigator.new.open(Elements.new.find_file(to).first) }      end    end    result("#{from.to_s} -> #{to.to_s}")  end  def toggle_to(from)	app = APPROOT    case from.extension.downcase      when 'php'		if from.ends?('.test.php')		  from = from.replace('.test.php', '.php')		  from.to_s =~ /(.*\/)(tests\/cases\/)(.*\.php)/		  init_root = $1		  test_path = $2		  final_path = $3		  puts "#{init_root}#{final_path}"          from.replace(from.to_s, "#{init_root}#{final_path}")		else		  from = from.replace('.php', '.test.php')		  if from.to_s.include?('plugins') 		    from.to_s =~ /(.*\/plugins\/.*?\/)(.*\.test.php)/		    init_root = $1		    test_path = 'tests/cases/'		    final_path = $2			puts "#{init_root}#{test_path}#{final_path}"			from.replace(from.to_s, "#{init_root}#{test_path}#{final_path}")		  else		    from.replace('/' + app + '/', '/' + app + '/tests/cases/')		  end		end				    end  endend